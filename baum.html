<html><head><base href="https://powderk.github.io/KranIQ/">
<meta charset="UTF-8">
<link rel="icon" type="image/png" href="175fd17d-82ca-42d5-8b77-69d705bbaf6d-removebg-preview.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Baumberechnung</title>
<style>
    body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #1a1a1a;
        color: #ffffff;
    }
    #landing {
        text-align: center;
        padding: 40px 20px;
    }
    .logo {
        width: auto;
        height: 200px;
        margin: 0 auto 30px;
        display: block;
    }
    .start-button {
        background-color: #ff4444;
        color: white;
        padding: 15px 30px;
        font-size: 18px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s;
        margin-top: 20px;
    }
    .start-button:hover {
        background-color: #ee3333;
    }
    .title {
        font-size: 24px;
        margin: 20px 0;
    }
    .subtitle {
        font-size: 18px;
        color: #999;
        margin-bottom: 30px;
    }
    .container {
        background-color: #2d2d2d;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        position: relative;
        margin-top: 20px;
    }
    .page {
        display: none;
    }
    .page.active {
        display: block;
    }
    .form-group {
        margin-bottom: 15px;
    }
    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        font-size: 1.2em;
        text-align: center; /* Center the label text */
    }
    input[type="number"], select {
        width: 100%;
        padding: 12px;
        border: 2px solid #444;
        border-radius: 4px;
        font-size: 1.1em;
        margin: 10px 0;
        background-color: #3d3d3d;
        color: white;
    }
    #stammlaenge, #stammMass {
        width: 120px; /* Keep the reduced width */
        min-width: 120px;
        margin: 0 auto; /* Center the input */
    }
    .unit-group {
        display: flex;
        gap: 10px;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
    }
    .button-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin: 10px 0;
        justify-content: center;
        align-items: center;
    }
    .navigation {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 20px;
    }
    button {
        background-color: #2196F3;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
    }
    button:hover {
        background-color: #1976D2;
    }
    button:disabled {
        background-color: #444444;
        cursor: not-allowed;
    }
    .formula {
        background-color: #3d3d3d;
        padding: 15px;
        border-radius: 4px;
        margin-top: 20px;
        font-family: monospace;
    }
    .unit-selector {
        display: flex;
        align-items: center;
        justify-content: center; /* Adjust unit selector alignment */
        gap: 10px;
        margin: 10px 0;
    }
    .unit-selector label {
        display: inline-block;
        margin: 0;
        font-weight: normal;
    }
    .number-button {
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 140px;
        padding: 10px 20px;
        text-align: center;
        background-color: #3d3d3d;
        border: 2px solid #444;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1.1em;
        color: white;
    }
    #page2a .number-button {
        flex: 0 0 140px;
        justify-content: center;
        align-items: center;
        margin: 5px;
    }
    #page2a .button-group {
        justify-content: center;
        gap: 15px;
        width: 100%;
    }
    #page2a .number-button img {
        width: 24px;
        height: 24px;
        margin-right: 8px;
    }
    .number-button.selected {
        background-color: #2196F3;
        color: white;
        border-color: #1976D2;
    }
    .number-button img {
        filter: brightness(0) invert(1);
        width: 24px;
        height: 24px;
        vertical-align: middle;
        margin-right: 8px;
    }
    select option {
        background-color: #3d3d3d;
        color: white;
    }
    .progress-bar {
        width: 100%;
        height: 10px;
        background-color: #444;
        border-radius: 5px;
        margin-bottom: 20px;
        overflow: hidden;
    }
    .progress-fill {
        height: 100%;
        background-color: #2196F3;
        transition: width 0.3s ease;
    }
    #page5 .number-button {
        flex: 0 0 140px;
        justify-content: center;
    }
    #page5 .button-group {
        justify-content: center;
        gap: 15px;
        width: 100%;
    }
    .copyright {
        font-size: 12px;
        color: #999;
        margin-top: 30px;
        text-align: center;
    }
    @media screen and (max-width: 600px) {
        body {
            padding: 10px;
            margin: 0;
            max-width: 100%;
        }

        .container {
            padding: 10px;
            margin: 10px 0;
        }

        .logo {
            height: 150px; /* Smaller logo for mobile */
            width: auto;
            max-width: 100%;
        }

        .title {
            font-size: 20px;
        }

        .subtitle {
            font-size: 16px;
        }

        .start-button {
            width: 100%;
            padding: 12px;
            font-size: 16px;
        }

        .button-group {
            flex-direction: column;
            gap: 8px;
        }

        .number-button {
            width: 100% !important;
            min-width: unset !important;
            height: 60px;
            padding: 8px;
            font-size: 16px;
            margin: 0 !important;
            flex: unset !important;
        }

        .navigation {
            flex-direction: column;
            gap: 10px;
            width: 100%;
        }

        .navigation button {
            width: 100%;
        }

        input[type="number"], select {
            font-size: 16px;
            padding: 8px;
        }

        #stammlaenge, #stammMass {
            width: 100px; /* Update mobile width */
            min-width: 100px;
            margin: 0 auto; /* Center the input */
        }

        .unit-group {
            flex-direction: row; /* Change from column to row */
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        .unit-selector {
            width: 100%;
            justify-content: space-around;
            margin: 10px 0;
        }

        .formula {
            font-size: 14px;
            padding: 10px;
            overflow-x: auto;
        }

        /* Adjust progress bar */
        .progress-bar {
            margin: 10px 0;
        }

        /* Adjust headings */
        h1 {
            font-size: 20px;
            margin: 10px 0;
        }

        /* Adjust form groups */
        .form-group {
            margin-bottom: 10px;
        }

        label {
            font-size: 16px;
            text-align: center; /* Center the label text */
            width: 100%; /* Full width for label */
        }

        /* Adjust copyright text */
        .copyright {
            font-size: 11px;
            margin: 20px 0;
            padding: 0 10px;
        }
    }
    /* Add some styles for the select element */
    select {
        width: 100%;
        padding: 12px;
        border: 2px solid #444;
        border-radius: 4px;
        font-size: 1.1em;
        margin: 10px 0;
        background-color: #3d3d3d;
        color: white;
    }

    select option {
        background-color: #3d3d3d;
        color: white;
        padding: 8px;
    }

    /* Progress bar adjustments for tree calculation pages */
    #tree1 .progress-bar .progress-fill {
        width: 33%;  /* First step of three */
    }

    #tree2 .progress-bar .progress-fill {
        width: 66%;  /* Second step of three */
    }

    #treeWoodType .progress-bar .progress-fill,
    #treeResult .progress-bar .progress-fill {
        width: 100%;  /* Final step */
    }

    /* Update styles for the measurement buttons */
    #tree2 .button-group button.number-button {
        height: auto;  /* Remove fixed height */
        padding: 12px 24px;  /* Match navigation button padding */
        min-width: 140px;
        margin: 5px;
    }

    @media screen and (max-width: 600px) {
        #tree2 .button-group button.number-button {
            width: 100% !important;
            min-width: unset !important;
            height: 60px;
            padding: 8px;
            font-size: 16px;
            margin: 0 !important;
            flex: unset !important;
        }
    }
</style>
<script>
function toggleFullScreen() {
    try {
        const doc = window.document;
        const docEl = doc.documentElement;

        // Check if fullscreen is available
        if (!docEl.requestFullscreen && 
            !docEl.mozRequestFullScreen && 
            !docEl.webkitRequestFullScreen && 
            !docEl.msRequestFullscreen) {
            console.log('Fullscreen API not available');
            return;
        }

        const requestFullScreen = docEl.requestFullscreen || 
                                docEl.mozRequestFullScreen || 
                                docEl.webkitRequestFullScreen || 
                                docEl.msRequestFullscreen;

        const cancelFullScreen = doc.exitFullscreen || 
                               doc.mozCancelFullScreen || 
                               doc.webkitExitFullscreen || 
                               doc.msExitFullscreen;

        if (!doc.fullscreenElement && 
            !doc.mozFullScreenElement && 
            !doc.webkitFullscreenElement && 
            !doc.msFullscreenElement) {
            if (requestFullScreen) {
                requestFullScreen.call(docEl).catch(err => {
                    console.log('Error attempting to enable fullscreen:', err);
                });
            }
        }
    } catch (error) {
        console.log('Error in toggleFullScreen:', error);
    }
}

// Update the load event listener to handle errors gracefully
window.addEventListener('load', function() {
    if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        try {
            toggleFullScreen();
        } catch (error) {
            console.log('Error trying to enter fullscreen on load:', error);
        }
    }
});

// Update the visibility change event listener to handle errors gracefully
document.addEventListener('visibilitychange', function() {
    if (document.visibilityState === 'visible' && 
        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        try {
            toggleFullScreen();
        } catch (error) {
            console.log('Error trying to enter fullscreen on visibility change:', error);
        }
    }
});

let currentPage = 1;
let pageHistory = ['landing'];

function showPage(pageNum) {
    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
    let pageId;
    if (typeof pageNum === 'number') {
        pageId = 'page' + pageNum;
    } else if (typeof pageNum === 'string') {
        pageId = pageNum;
    }
    const page = document.getElementById(pageId);
    if (page) {
        page.classList.add('active');
        currentPage = pageNum;
        if (pageHistory[pageHistory.length - 1] !== pageId && pageId !== 'landing') {
            pageHistory.push(pageId);
        }
    } else {
        console.error('Page not found:', pageId);
    }
}

function startTreeCalculator() {
    showPage('tree1');
}

function goBack() {
    if (pageHistory.length > 1) {
        pageHistory.pop();
        const previousPage = pageHistory[pageHistory.length - 1];
        pageHistory.pop();
        showPage(previousPage);
    }
}

function validateTreeLength() {
    const length = document.getElementById('stammlaenge').value;
    if (length && parseFloat(length) > 0) {
        showPage('tree2');
    } else {
        alert('Bitte geben Sie eine gültige Stammlänge ein.');
    }
}

function switchMeasurement(type) {
    currentMeasurement = type;
    const label = document.getElementById('measurement-label');
    document.querySelectorAll('#tree2 .number-button').forEach(btn => {
        btn.classList.remove('selected');
    });
    event.target.classList.add('selected');
    
    // Update the label text to include units in parentheses
    label.textContent = type === 'umfang' ? 'Stammumfang (cm):' : 'Stammdurchmesser (cm):';
}

let currentMeasurement = 'umfang';

function calculateTreeVolume() {
    const length = parseFloat(document.getElementById('stammlaenge').value);
    const measurement = parseFloat(document.getElementById('stammMass').value);
    
    if (!measurement || measurement <= 0) {
        alert('Bitte geben Sie gültige Maße ein.');
        return;
    }
    
    let radius;
    if (currentMeasurement === 'umfang') {
        radius = measurement / (2 * Math.PI);
    } else {
        radius = measurement / 2;
    }
    
    const volume = Math.PI * Math.pow(radius/100, 2) * length;
    
    // Store volume for later use
    window.treeVolume = volume;
    
    // Show wood type selection
    showPage('treeWoodType');
}

// Add new function to calculate final weight
function calculateTreeWeight() {
    const woodType = document.getElementById('woodType');
    const selectedOption = woodType.options[woodType.selectedIndex];
    
    if (!woodType.value) {
        alert('Bitte wählen Sie eine Holzart aus.');
        return;
    }
    
    const density = parseFloat(woodType.value);
    const volume = window.treeVolume;
    const weight = volume * density;
    
    document.getElementById('volumeResult').innerHTML = `
        Stammvolumen: ${volume.toFixed(2)} m³<br>
        Holzart: ${selectedOption.text}<br>
        Geschätztes Gewicht: ${weight.toFixed(0)} kg
    `;
    
    showPage('treeResult');
}

// Update resetTreeCalculator to also reset wood type
function resetTreeCalculator() {
    document.getElementById('stammlaenge').value = '';
    document.getElementById('stammMass').value = '';
    document.getElementById('woodType').value = '';
    window.treeVolume = null;
    showPage('landing');
}
</script>
</head>
<body>
<div id="landing" class="page active">
    <img src="Logo_Zugkraftberechnung.png" alt="A cartoon illustration of a man in a suit and glasses, with a joyful expression and his hands clasped together. The backdrop features the words 'FEUERWEHR HANNOVER' in yellow lettering, suggesting affiliation with the Hanover Fire Department." class="logo">
    <h1 class="title">Baumberechnung</h1>
    <p class="subtitle">Feuerwehr Hannover - Feuer- und Rettungswache 5</p>
    <p style="font-size: 16px; color: #999; margin-bottom: 20px;">Version 1.0</p>
    <p style="color: #ff4444; font-size: 14px; margin: 20px 0; padding: 10px; border: 1px solid #ff4444; border-radius: 4px;">
        Hinweis: Bei den berechneten Werten handelt es sich um Schätzwerte zur groben Orientierung. Der Kranmaschinist trägt die volle Verantwortung für sein Handeln und muss die örtlichen Gegebenheiten sowie weitere Einflussfaktoren eigenständig bewerten.
    </p>
    <div style="display: flex; flex-direction: column; gap: 15px; max-width: 300px; margin: 0 auto;">
        <button class="start-button" style="background-color: #2196F3;" onclick="startTreeCalculator()">Baumberechnung</button>
    </div>
    <div class="copyright">
        &copy; 2024 Feuerwehr Hannover - Feuer- und Rettungswache 5 by Benjamin Kreitz
    </div>
</div>
<div class="container">
    <div id="tree1" class="page">
        <div class="progress-bar">
            <div class="progress-fill" style="width: 33%"></div>
        </div>
        <h1>Stammlänge</h1>
        <div class="form-group">
            <label for="stammlaenge">Stammlänge (m):</label>
            <div class="unit-group">
                <input type="number" id="stammlaenge" min="0" step="0.1" required="">
                <div class="unit-selector">
                    <!-- Remove the m label -->
                </div>
            </div>
        </div>
        <div class="navigation">
            <button onclick="showPage('landing')">Zurück</button>
            <button onclick="validateTreeLength()">Weiter</button>
        </div>
    </div>

    <div id="tree2" class="page">
        <div class="progress-bar">
            <div class="progress-fill" style="width: 66%"></div>
        </div>
        <h1>Stammmaße</h1>
        <div class="form-group">
            <div class="button-group" style="margin-bottom: 20px;">
                <button class="number-button" onclick="switchMeasurement('umfang')">Umfang</button>
                <button class="number-button" onclick="switchMeasurement('durchmesser')">Durchmesser</button>
            </div>
            <div class="form-group">
                <label id="measurement-label" for="stammMass">Stammumfang (cm):</label>
                <div class="unit-group">
                    <input type="number" id="stammMass" min="0" step="0.1" required="">
                </div>
            </div>
        </div>
        <div class="navigation">
            <button onclick="goBack()">Zurück</button>
            <button onclick="calculateTreeVolume()">Weiter</button>
        </div>
    </div>

    <div id="treeWoodType" class="page">
        <div class="progress-bar">
            <div class="progress-fill" style="width: 100%"></div>
        </div>
        <h1>Holzart auswählen</h1>
        <div class="form-group">
            <label for="woodType">Holzart:</label>
            <select id="woodType" required="">
                <option value="">Bitte wählen...</option>
                <option value="960">Ahorn (960 kg/m³)</option>
                <option value="840">Apfelbaum (840 kg/m³)</option>
                <option value="830">Birke (830 kg/m³)</option>
                <option value="910">Buche (910 kg/m³)</option>
                <option value="770">Douglasie (770 kg/m³)</option>
                <option value="930">Eiche (930 kg/m³)</option>
                <option value="600">Erle (600 kg/m³)</option>
                <option value="860">Esche (860 kg/m³)</option>
                <option value="470">Fichte (470 kg/m³)</option>
                <option value="520">Kiefer (520 kg/m³)</option>
                <option value="670">Kirsche (670 kg/m³)</option>
                <option value="590">Lärche (590 kg/m³)</option>
                <option value="600">Linde (600 kg/m³)</option>
                <option value="650">Nussbaum (650 kg/m³)</option>
                <option value="450">Tanne (450 kg/m³)</option>
                <option value="900">Zwetschge (900 kg/m³)</option>
            </select>
        </div>
        <div class="navigation">
            <button onclick="goBack()">Zurück</button>
            <button onclick="calculateTreeWeight()">Berechnen</button>
        </div>
    </div>

    <div id="treeResult" class="page">
        <h1>Berechnetes Volumen</h1>
        <div style="color: #ff4444; font-size: 14px; margin: 20px 0; padding: 10px; border: 1px solid #ff4444; border-radius: 4px;">
            Hinweis: Bei den berechneten Werten handelt es sich um Schätzwerte zur groben Orientierung. Die tatsächlichen Werte können aufgrund verschiedener Faktoren wie Feuchtigkeit, Alter und Form des Stammes abweichen.
        </div>
        <div class="formula" style="background-color: #2196F3; margin: 20px 0;">
            <h2 style="margin-top: 0; color: white;">Stammvolumen:</h2>
            <p id="volumeResult" style="font-size: 24px; margin: 10px 0; color: white;"></p>
        </div>
        <div class="navigation">
            <button onclick="resetTreeCalculator()">Neue Berechnung</button>
        </div>
    </div>
</div>
</body></html>
